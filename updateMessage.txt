# Persona Bot v3.30.0 - The Direct Line

*Fellow architects of the digital realm,*

Why should your choice of persona be locked to your settings? Today we introduce `/ask` - a direct channel to any persona, any time, with full context awareness.

## What's New

### The `/ask` Command

Request a response from any persona with a custom prompt. No need to change your default persona - simply ask who you want to hear from.

```
/ask persona:zen prompt:"What is the sound of one hand coding?"
/ask persona:analyst prompt:"Review this architecture decision" ignore_context:true
/ask persona:bard prompt:"Compose a commit message worthy of legend"
```

**Parameters:**
- `persona` (required): Choose from all 12 personas
- `prompt` (required): Your question or prompt
- `ignore_context` (optional): Skip channel/thread history (default: false)

### Context-Aware Responses

By default, `/ask` includes conversation context:
- **In threads**: Fetches recent messages from the thread
- **In channels**: Retrieves conversation history from the database
- **With `ignore_context:true`**: Fresh perspective, no prior context

### Styled Responses

Responses appear as beautifully styled embeds with:
- Persona name as the author
- Portrait icon (when configured)
- Accent color matching the persona's identity

## Technical Harmony

- **New Command**: `/ask` with persona, prompt, and ignore_context options
- **Context Detection**: Automatically identifies threads vs channels
- **Embed Styling**: Uses existing `build_persona_embed()` pattern
- **Portrait Integration**: Leverages `get_persona_with_portrait()` for icon URLs
- **Long Response Handling**: Splits responses > 4096 chars into multiple embeds

### Architecture

```
/ask command received
    -> Validate persona exists
    -> Defer interaction (AI calls take time)
    -> Fetch context (unless ignore_context:true)
        -> Thread: fetch recent messages
        -> Channel: query database
    -> Get system prompt for selected persona
    -> Call OpenAI with context
    -> Build styled embed response
    -> Handle multi-chunk if response > 4096 chars
```

## The Vision

Every persona is now a direct call away. Ask the Analyst for a code review, consult the Zen Master for perspective, or let the Bard compose your documentation. The voice you need, when you need it.

*The conversation continues...*

---
Ask Command: 1.0.0 (NEW)
- Ask any persona a question with optional context
- All 12 personas available: obi, muppet, chef, teacher, analyst, visionary, noir, zen, bard, coach, scientist, gamer
- Context-aware with ignore_context option
- Styled embed responses with persona identity

*~ The Visionary*
